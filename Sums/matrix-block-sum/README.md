# 1314. Matrix Block Sum

[Description!](https://leetcode.com/problems/matrix-block-sum/description/)

Given a m x n matrix mat and an integer k, return a matrix answer where each answer[i][j] is the sum of all elements mat[r][c] for:

i - k <= r <= i + k,
j - k <= c <= j + k, and
(r, c) is a valid position in the matrix

[My Solution](https://github.com/kkwwaa/Problem-Solving/new/main/Sums/matrix-block-sum)
***
### Ru Notes

1. Что делает код?
- Берёт матрицу (например, [[1,2,3], [4,5,6], [7,8,9]]) и число K (например, 1).
- Для каждой ячейки считает сумму всех чисел в прямоугольнике вокруг неё (в пределах K шагов).
- Возвращает новую матрицу с этими суммами.
2. Почему интегральное изображение?
- Без него мы бы для каждой ячейки перебирали все элементы в прямоугольнике (это долго, особенно если K большое).
- Интегральное изображение позволяет получить сумму в прямоугольнике за 4 операции (взять 4 значения и сложить/вычесть).
3. Как строится интегральное изображение?
- **Для каждой ячейки (y, x) суммируем все элементы от (0,0) до (y,x):**
  - Сначала суммируем элементы в строке слева направо (summation += mat[y][x]).
  - Добавляем сумму из предыдущей строки (integral_image[y-1][x]), если она есть.
4. Как считается сумма в прямоугольнике?
- Для ячейки (y, x) определяем границы прямоугольника: от y-K до y+K по строкам, от x-K до x+K по столбцам.
- Используем формулу:
- Берём значение в правом нижнем углу (integral_image[max_row][max_col]). **(D)**
- Вычитаем лишние области сверху и слева.
- Добавляем пересечение, если оно было вычтено дважды.
